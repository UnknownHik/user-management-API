FROM golang:1.23

# Установка рабочего каталога
WORKDIR /app

# Копируем только файлы go.mod и go.sum для кэширования зависимостей
COPY go.* ./
RUN go mod download

# Копируем исходный код в рабочую директорию
COPY . .

# Сборка приложения.
RUN go build -o app ./cmd/main.go

# Устанавливаем команду по умолчанию для запуска контейнера
CMD ["./app"]